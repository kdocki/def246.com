<html>
    <head>
        <title>Kelvin</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="icon" type="image/png" sizes="16x16" href="favicon.png">

<link rel="stylesheet" type="text/css" href="/assets/site.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
<link href="https://fonts.googleapis.com/css?family=Lora|Merriweather" rel="stylesheet">
<link rel="stylesheet" href="/assets/highlight/styles/default.css">
<script src="/assets/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script>
  if (location.hostname != "def246.com") {
  document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
  ':35729/livereload.js?snipver=1"></' + 'script>')
  }
</script> 

        <meta name="author" content="Kelvin">
        <meta name="description" content="ActiveRecord is to Ruby on Rails as Active Objects is to Java. Ideally it would be called AwesomeObjects. At last, persisting data for your Java web application is not all xml, POJOS, EJBs and did I mention xml? I don’t hate xml but I find configuring your application extremely inefficient after working with other frameworks that utilize convention over configuration.
Why do I have to specifiy a log4j properties file, hibernate persistance.xml configuration. And there’s soooo many options of how to develop: JPA, Wicket, OJB, Spring, Struts, Torque, Cayenne, Jaxor, TJDO, JDBM, pBeans, JPOX, Simple ORM, Ibatis, XORM, Speedo, Smyle, PAT, LiDO, JDO, IntelliBO, KodoJDO, Hamlets, Faces, RIFE, Shale, Sling, Stripes, Vaadin, Poopdeck (okay, I just made that one up). Point is that It can be a real headache to develop a Java web app.
Furthermore, why do I have to create my POJOs and SQL for my database? Why can’t a framework just create my data objects, along with nice RESTful CRUD operations for each. Why, crow, why?! So at least for the moment, finding ActiveObjects is lemonade to quench my thirst for answers.
">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Java ActiveObjects with a squeeze of Blackboard">
        <meta property="og:url" content="http://def246.com/2011/11/2011-11-03_java-activeobjects-with-a-squeeze-of-blackboard/">
        <meta property="og:site_name" content="def246">
        <meta property="og:description" content="ActiveRecord is to Ruby on Rails as Active Objects is to Java. Ideally it would be called AwesomeObjects. At last, persisting data for your Java web application is not all xml, POJOS, EJBs and did I mention xml? I don’t hate xml but I find configuring your application extremely inefficient after working with other frameworks that utilize convention over configuration.
Why do I have to specifiy a log4j properties file, hibernate persistance.xml configuration. And there’s soooo many options of how to develop: JPA, Wicket, OJB, Spring, Struts, Torque, Cayenne, Jaxor, TJDO, JDBM, pBeans, JPOX, Simple ORM, Ibatis, XORM, Speedo, Smyle, PAT, LiDO, JDO, IntelliBO, KodoJDO, Hamlets, Faces, RIFE, Shale, Sling, Stripes, Vaadin, Poopdeck (okay, I just made that one up). Point is that It can be a real headache to develop a Java web app.
Furthermore, why do I have to create my POJOs and SQL for my database? Why can’t a framework just create my data objects, along with nice RESTful CRUD operations for each. Why, crow, why?! So at least for the moment, finding ActiveObjects is lemonade to quench my thirst for answers.
">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Java ActiveObjects with a squeeze of Blackboard">
        <meta name="twitter:description" content="ActiveRecord is to Ruby on Rails as Active Objects is to Java. Ideally it would be called AwesomeObjects. At last, persisting data for your Java web application is not all xml, POJOS, EJBs and did I mention xml? I don’t hate xml but I find configuring your application extremely inefficient after working with other frameworks that utilize convention over configuration.
Why do I have to specifiy a log4j properties file, hibernate persistance.xml configuration. And there’s soooo many options of how to develop: JPA, Wicket, OJB, Spring, Struts, Torque, Cayenne, Jaxor, TJDO, JDBM, pBeans, JPOX, Simple ORM, Ibatis, XORM, Speedo, Smyle, PAT, LiDO, JDO, IntelliBO, KodoJDO, Hamlets, Faces, RIFE, Shale, Sling, Stripes, Vaadin, Poopdeck (okay, I just made that one up). Point is that It can be a real headache to develop a Java web app.
Furthermore, why do I have to create my POJOs and SQL for my database? Why can’t a framework just create my data objects, along with nice RESTful CRUD operations for each. Why, crow, why?! So at least for the moment, finding ActiveObjects is lemonade to quench my thirst for answers.
">
    </head>
<body>

    <div class="bg-gray-200">
  <div class="container mx-auto px-4">
      <nav class="flex flex-wrap items-center justify-between p-4">
        <div class="lg:order-2 w-auto lg:w-1/5 sm:text-center"><a class="text-2xl text-gray-900 hover:text-gray-700" href="/">Kelvin</a></div>

        <div class="navbar-menu lg:order-3 lg:block w-full lg:w-2/5 lg:text-right">
          <a class="block lg:inline-block mt-4 lg:mt-0 mr-10 text-gray-900 hover:text-gray-700" href="/">Home</a>
          <a class="block lg:inline-block mt-4 lg:mt-0 mr-10 text-gray-900 hover:text-gray-700" href="/posts">Blog</a>
        </div>
      </nav>
    </div>
</div>


    <div class="container mx-auto">
        <div class="flex">
            <div class="w-3/3 min-w-full px-1">
                <div class="flex items-center">
                    <div class="w-1/5 pt-4">
                        
                        <a href="/2011/10/2011-10-21_blackboard-coursesites-introduction/">Previous article</a>
                        
                    </div>
                    <div class="w-3/5">
                        <h1 class="mt-8 text-center text-3xl text-blue-600">
                            Java ActiveObjects with a squeeze of Blackboard
                        </h1>
                    </div>
                    <div class="w-1/5 pt-4 text-right">
                        
                        <a href="/2011/11/2011-11-26_blackboard-taglib-issue-with-itemidaccessor/">Next article</a>
                        
                    </div>
                </div>

                <div class="flex">
                    <div class="post-body h-full py-8 bg-white border-t">
                        <p>ActiveRecord is to Ruby on Rails as Active Objects is to Java. Ideally it would be called AwesomeObjects. At last, persisting data for your Java web application is not all xml, POJOS, EJBs and did I mention xml? I don’t hate xml but I find configuring your application extremely inefficient after working with other frameworks that utilize convention over configuration.</p>
<p>Why do I have to specifiy a log4j properties file, hibernate persistance.xml configuration. And there’s soooo many options of how to develop: JPA, Wicket, OJB, Spring, Struts, Torque, Cayenne, Jaxor, TJDO, JDBM, pBeans, JPOX, Simple ORM, Ibatis, XORM, Speedo, Smyle, PAT, LiDO, JDO, IntelliBO, KodoJDO, Hamlets, Faces, RIFE, Shale, Sling, Stripes, Vaadin, Poopdeck (okay, I just made that one up). Point is that It can be a real headache to develop a Java web app.</p>
<p>Furthermore, why do I have to create my POJOs and SQL for my database? Why can’t a framework just create my data objects, along with nice RESTful CRUD operations for each. <em>Why, crow, why?!</em> So at least for the moment, finding ActiveObjects is lemonade to quench my thirst for answers.</p>
<!-- more -->
<p>The documentation is lacking for ActiveObject but I was able to get it working quite easily. As soon as I saw the interface annotations for this library, I knew it would be a blast working with - assuming the pesticides had been spread around the source code e.g. no bugs. The website can be found here: <a href="http://java.net/projects/activeobjects/pages/Home">http://java.net/projects/activeobjects/pages/Home</a></p>
<p>Below I have an example on how to use Active Objects. Let us assume our web application has the concept of “templates” which we want to persist in the database. Templates can have questions, instances and permissions (those are all just interfaces too). As you can see below we just define java interfaces with get and set methods. You don’t implement the methods, just define them for reflection by AO. Also every interface will have a <code>getID()</code> method inherited from the parent Entity class. You can also add any annotations to describe any more specific mappings between your Java interface, other interfaces and also types for the database table. For example, below I use <code>@OneToMany</code> and <code>@SQLType(Types.CLOB)</code>.</p>
<pre><code>import java.sql.Timestamp;
import java.sql.Types;

import net.java.ao.Entity;
import net.java.ao.OneToMany;
import net.java.ao.schema.SQLType;

public interface Template extends Entity {
        public String getName();
        public void setName(String name);

        @SQLType(Types.CLOB)
        public String getDescription();

        @SQLType(Types.CLOB)
        public void setDescription(String description);

        public String getIncludePattern();
        public void setIncludePattern(String includePattern);

        public String getExcludePattern();
        public void setExcludePattern(String excludePattern);

        public String getCreateDate();
        public void setCreateDate(String createDate);

        public Timestamp getLastUpdated();
        public void setLastUpdated(Timestamp lastUpdated);

        public Integer getCurrentInstance();
        public void setCurrentInstance(Integer currentInstance);

        @OneToMany
        public Permission[] getPermissions();

        @OneToMany
        public Instance[] getInstances();

        @OneToMany
        public Question[] getQuestions();
}
</code></pre>
<p>I had attempted to use Active Objects with a Blackboard Building Block (also called a B2), but the Blackboard API didn’t seem to want to give me a proper information on how to connect to the database (Bb v 9.1.7). Therefore I never actually got around to using this code, but I’ll share it with you since you’re already here. And I wanna give a big shout out to Peter Fokkinga’s since I’m using his DbUtils class which can be found on <a href="http://forums.edugarage.com/cfs-filesystemfile.ashx/__key/CommunityServer.Components.UserFiles/00.00.00.22.76/DbUtils.java.txt">edugarage</a>.</p>
<pre><code>// a class that I would use to get the Active Objects Database connection
// however didn't use due to the inconsistent behavior of data returned from
// Blackboard's VirtualInstallation (found case in 9.1.7 where bad database host was given

public class Database extends net.java.ao.DatabaseProvider {
        static Database _instance;
        static EntityManager _manager;

        @Override
        public Class&lt;? extends Driver&gt; getDriverClass() throws ClassNotFoundException {
                VirtualInstallation vi = Database.information();

                if(vi.getDbType().equals(&quot;mssql&quot;)) return (Class&lt;? extends Driver&gt;) Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);

                else if(vi.getDbType().equals(&quot;oracle&quot;)) return (Class&lt;? extends Driver&gt;) Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);

                return null;
        }

        @Override
        protected String renderAutoIncrement() {
                VirtualInstallation vi = Database.information();
                if(vi.getDbType().equals(&quot;mssql&quot;)) return &quot;IDENTITY(1,1)&quot;;

                return &quot;IDENTITY&quot;;
        }


        public static Database instance()
        {
                if(_instance == null) {
                        VirtualInstallation vi = Database.information();

                        String dbInstance = (vi.getDbInstance() != null ? vi.getDbInstance() : &quot;&quot;) + &quot;/&quot; + vi.getDbUser();

                        DbUtils.SupportedDatabase dbType = DbUtils.SupportedDatabase.fromDriver(vi.getDbType());

                        String jdbc = dbType.getConnectString(vi.getDbHost(), vi.getDbPort(), dbInstance);

                        _instance = new Database(jdbc, vi.getDbUser(), vi.getDbPass());
                }

                return _instance;
        }

        public static EntityManager manager() throws PlugInException
        {
                if(_manager == null) {
                        _manager = new EntityManager(instance());
                }

                return _manager;
        }
}
</code></pre>
<p>So how would we use this Database class? Assuming the virtual installation worked consistently, below is an example using Spring with controller request mappings of how to do an edit and update.</p>
<p>Assuming you had the Database class from above then you could do something like this in your controller, below I really only use the find() but you can use all the goodies from Active Objects (see here: <a href="http://activeobjects.java.net/0.8.2/api">http://activeobjects.java.net/0.8.2/api</a>) like create, count, find, get, delete, and even migrate (creates your table for you just based on the interface definitions). Yes, you don’t use a POJO class, you use an POJO interface - which is really just genius.</p>
<pre><code>@RequestMapping(value=&quot;/templates/{id}&quot;, method = RequestMethod.GET)
public String get(@PathVariable(&quot;id&quot;) Integer id, Model model) {

        Template[] templates = Database.manager().find(Template.class, &quot;id = ?&quot;, id);

        // We didn't find a template with this id so just show the index page
        if(templates.length == 0) return &quot;redirect:/templates/&quot;;

        // found a template with this id, so let's edit that template
        model.addAttribute(&quot;template&quot;, templates[0]);
        model.addAttribute(&quot;helper&quot;, new ViewHelper());

        return &quot;templates/edit&quot;;
}

@RequestMapping(value=&quot;/templates/{id}&quot;, method = RequestMethod.POST)
public String update(HttpServletRequest request, @PathVariable(&quot;id&quot;) Integer id,
                                                 Model model) {

        // Get the requests for this template
        String name = request.getParameter(&quot;template_name&quot;);
        String description = request.getParameter(&quot;template_description_text&quot;);
        String includePattern = request.getParameter(&quot;include_pattern_text&quot;);
        String excludePattern = request.getParameter(&quot;exclude_pattern_text&quot;);

        // Find the template and save the new values
        Template[] templates = Database.manager().find(Template.class, &quot;id = ?&quot;, id);
        if(templates.length != 0) {

                templates[0].setName(name);
                templates[0].setDescription(description);
                templates[0].setIncludePattern(includePattern);
                templates[0].setExcludePattern(excludePattern);

                templates[0].save();
        }

        return &quot;redirect:/templates/&quot;;
}
</code></pre>
<p>f I come onto any projects that need a standalone website I would like to combine the Grails or Play! framework and use ActiveObjects for the Model part of the MVC framework - resulting in sheer Java bad-ass-ery. I know Java is a huge language and web frameworks only covers a small part of it’s ability; however, I really like the idea of Java becoming a competitor for simple turnkey web apps, the same ones that can be made in a short time using the conventions of CakePHP, Zend, Django and Rails. Developing in Play! and ActiveObjects is just plain easier. I don’t imagine that JEE, ContextFactories and extensive xml configurations are just going to magically disappear (you know job security and all that), but this is the age of designing RESTful web services and shunning away the complexities of CORBA and even SOAP.</p>
<p>I’m sure in ten years, something new will be along to lay rest to REST (sorry I couldn’t resist) but for now, the general consensus seems to be that web applications should be very simple to develop and maintain, i.e. wham, bam, thank you mam.</p>

                    </div>                        
                </div>

                <div class="text-right">
                    <div>post by Kelvin on 11/03/2011</div>
                </div>
            </div>
        </div>

        <div id="disqus_thread"></div>

        <script>
            var disqus_shortname = '';
            var disqus_url = 'def246.com//2011/11/2011-11-03_java-activeobjects-with-a-squeeze-of-blackboard/';
          
            (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//go.disqus.com/embed.js';

            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>

    </div>
</body>
</html>